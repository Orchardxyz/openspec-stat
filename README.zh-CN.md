# openspec-stat

[![NPM version](https://img.shields.io/npm/v/openspec-stat.svg?style=flat)](https://npmjs.com/package/openspec-stat)
[![NPM downloads](http://img.shields.io/npm/dm/openspec-stat.svg?style=flat)](https://npmjs.com/package/openspec-stat)
[![CI](https://github.com/Orchardxyz/openspec-stat/actions/workflows/ci.yml/badge.svg)](https://github.com/Orchardxyz/openspec-stat/actions/workflows/ci.yml)

ç”¨äºè¿½è¸ªå›¢é˜Ÿæˆå‘˜åœ¨ Git ä»“åº“ä¸­çš„ OpenSpec ææ¡ˆå’Œä»£ç å˜æ›´çš„å‘½ä»¤è¡Œå·¥å…·ã€‚

[English](./README.md) | ç®€ä½“ä¸­æ–‡

## åŠŸèƒ½ç‰¹æ€§

- âœ… è¿½è¸ªæŒ‡å®šæ—¶é—´èŒƒå›´å†…çš„ Git æäº¤
- âœ… è¯†åˆ«åŒæ—¶åŒ…å« OpenSpec ææ¡ˆå’Œä»£ç å˜æ›´çš„æäº¤
- âœ… **ææ¡ˆç»´åº¦ç»Ÿè®¡æ±‡æ€»** - æŒ‰ææ¡ˆèšåˆç»Ÿè®¡ï¼Œé¿å… merge commit å¯¼è‡´çš„ç»Ÿè®¡åå·®
- âœ… æŒ‰ä½œè€…åˆ†ç»„ç»Ÿè®¡ï¼ˆæäº¤æ•°ã€ææ¡ˆæ•°ã€ä»£ç å˜æ›´ï¼‰
- âœ… æ”¯æŒå¤šåˆ†æ”¯å’Œé€šé…ç¬¦è¿‡æ»¤
- âœ… ä½œè€…åç§°æ˜ å°„ï¼ˆå¤„ç†åŒä¸€äººçš„å¤šä¸ª Git è´¦å·ï¼‰
- âœ… ä»…è¿½è¸ªæœ€è¿‘æ´»è·ƒçš„æˆå‘˜ï¼ˆé»˜è®¤ï¼š2 å‘¨ï¼‰
- âœ… å¤šç§è¾“å‡ºæ ¼å¼ï¼šè¡¨æ ¼ã€JSONã€CSVã€Markdown
- âœ… å›½é™…åŒ–æ”¯æŒï¼šè‹±æ–‡å’Œä¸­æ–‡
- âœ… **ğŸ†• å¤šä»“åº“æ¨¡å¼ï¼ˆBETAï¼‰** - ä¸€æ¬¡è¿è¡Œåˆ†æå¤šä¸ªæœ¬åœ°/è¿œç¨‹ä»“åº“

## å®‰è£…

### å…¨å±€å®‰è£…

```bash
npm install -g openspec-stat
# æˆ–
pnpm add -g openspec-stat
```

### æœ¬åœ°é¡¹ç›®å®‰è£…

```bash
npm install openspec-stat --save-dev
# æˆ–
pnpm add -D openspec-stat
```

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç”¨æ³•

åœ¨ Git ä»“åº“ç›®å½•ä¸­è¿è¡Œï¼š

```bash
openspec-stat
```

è¿™å°†è¿½è¸ªé»˜è®¤æ—¶é—´èŒƒå›´å†…çš„æäº¤ï¼ˆæ˜¨å¤© 20:00 ~ ä»Šå¤© 20:00ï¼‰ã€‚

### å¤šä»“åº“æ¨¡å¼ï¼ˆBETAï¼‰

âš ï¸ **å®éªŒæ€§åŠŸèƒ½**ï¼šå¤šä»“åº“æ¨¡å¼å…è®¸åœ¨å•æ¬¡è¿è¡Œä¸­åˆ†æå¤šä¸ªä»“åº“ï¼ˆæœ¬åœ°æˆ–è¿œç¨‹ï¼‰ã€‚

```bash
# åˆå§‹åŒ–å¤šä»“åº“é…ç½®ï¼ˆäº¤äº’å¼å‘å¯¼ï¼‰
openspec-stat init --multi

# è¿è¡Œå¤šä»“åº“åˆ†æ
openspec-stat multi -c .openspec-stats.multi.json

# è¿è¡Œå¹¶æ˜¾ç¤ºè¯¦ç»†çš„è´¡çŒ®è€…ç»Ÿè®¡
openspec-stat multi -c .openspec-stats.multi.json --show-contributors

# ç”Ÿæˆé…ç½®æ¨¡æ¿
openspec-stat init --template multi -o config.json
```

**é€‚ç”¨äºä»¥ä¸‹åœºæ™¯çš„å›¢é˜Ÿç®¡ç†è€…ï¼š**
- æ‹¥æœ‰åç«¯ä»“åº“çš„æœ¬åœ°è®¿é—®æƒé™ï¼Œä½†æ²¡æœ‰å‰ç«¯ä»“åº“
- éœ€è¦è·¨å¤šä¸ªä»“åº“è¿½è¸ªè´¡çŒ®æƒ…å†µ
- å¸Œæœ›è·å¾—åˆå¹¶ç»Ÿè®¡ç»“æœï¼Œè€Œæ— éœ€è¿è¡Œå¤šä¸ªå‘½ä»¤

**æ³¨æ„**ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œå¤šä»“åº“æ¨¡å¼ä»…æ˜¾ç¤ºèšåˆç»Ÿè®¡ä¿¡æ¯ï¼Œä»¥é¿å…ä¿¡æ¯è¿‡è½½ã€‚ä½¿ç”¨ `--show-contributors` å¯æŸ¥çœ‹æ¯ä¸ªè´¡çŒ®è€…çš„è¯¦ç»†ç»Ÿè®¡ä¿¡æ¯ã€‚

è¯¦ç»†æ–‡æ¡£è¯·å‚é˜… [å¤šä»“åº“æ¨¡å¼æŒ‡å—](./MULTI_REPO_GUIDE.md)ã€‚

### å‘½ä»¤è¡Œé€‰é¡¹

```bash
openspec-stat [é€‰é¡¹]

é€‰é¡¹ï¼š
  -r, --repo <path>           ä»“åº“è·¯å¾„ï¼ˆé»˜è®¤ï¼šå½“å‰ç›®å½•ï¼‰
  -b, --branches <branches>   åˆ†æ”¯åˆ—è¡¨ï¼Œé€—å·åˆ†éš”ï¼ˆä¾‹å¦‚ï¼šorigin/master,origin/release/v1.0ï¼‰
  -s, --since <datetime>      å¼€å§‹æ—¶é—´ï¼ˆé»˜è®¤ï¼šæ˜¨å¤© 20:00ï¼‰
  -u, --until <datetime>      ç»“æŸæ—¶é—´ï¼ˆé»˜è®¤ï¼šä»Šå¤© 20:00ï¼‰
  -a, --author <name>         æŒ‰ç‰¹å®šä½œè€…ç­›é€‰
  --json                      ä»¥ JSON æ ¼å¼è¾“å‡º
  --csv                       ä»¥ CSV æ ¼å¼è¾“å‡º
  --markdown                  ä»¥ Markdown æ ¼å¼è¾“å‡º
  -c, --config <path>         é…ç½®æ–‡ä»¶è·¯å¾„
  -v, --verbose               è¯¦ç»†è¾“å‡ºæ¨¡å¼
  -l, --lang <language>       è¾“å‡ºè¯­è¨€ï¼ˆen, zh-CNï¼‰ï¼ˆé»˜è®¤ï¼š"en"ï¼‰
  -V, --version               æ˜¾ç¤ºç‰ˆæœ¬å·
  -h, --help                  æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
```

### ä½¿ç”¨ç¤ºä¾‹

```bash
# è¿½è¸ªé»˜è®¤æ—¶é—´èŒƒå›´
openspec-stat

# è¿½è¸ªç‰¹å®šæ—¶é—´èŒƒå›´
openspec-stat --since "2024-01-01 00:00:00" --until "2024-01-31 23:59:59"

# è¿½è¸ªç‰¹å®šåˆ†æ”¯
openspec-stat --branches "origin/master,origin/release/v1.0"

# è¿½è¸ªç‰¹å®šä½œè€…
openspec-stat --author "å¼ ä¸‰"

# è¾“å‡º JSON æ ¼å¼
openspec-stat --json > stats.json

# è¾“å‡º Markdown æŠ¥å‘Š
openspec-stat --markdown > report.md

# è¯¦ç»†è¾“å‡ºæ¨¡å¼
openspec-stat --verbose

# ä½¿ç”¨è‡ªå®šä¹‰é…ç½®æ–‡ä»¶
openspec-stat --config ./my-config.json

# ä½¿ç”¨ä¸­æ–‡è¾“å‡º
openspec-stat --lang zh-CN

# ç»„åˆå¤šä¸ªé€‰é¡¹
openspec-stat --lang zh-CN --verbose
```

## é…ç½®æ–‡ä»¶

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.openspec-stats.json` æˆ– `openspec-stats.config.json`ï¼š

```json
{
  "defaultBranches": [
    "origin/master",
    "origin/main",
    "origin/release/*"
  ],
  "defaultSinceHours": -30,
  "defaultUntilHours": 18,
  "authorMapping": {
    "å¼ ä¸‰": "å¼ ä¸‰",
    "zhangsan@company.com": "å¼ ä¸‰",
    "zs": "å¼ ä¸‰"
  },
  "openspecDir": "openspec/",
  "excludeExtensions": [
    ".md",
    ".txt",
    ".png",
    ".jpg",
    ".jpeg",
    ".gif",
    ".svg",
    ".ico",
    ".webp"
  ],
  "activeUserWeeks": 2
}
```

### é…ç½®é€‰é¡¹è¯´æ˜

- **defaultBranches**ï¼šé»˜è®¤è¿½è¸ªçš„åˆ†æ”¯ï¼ˆæ”¯æŒé€šé…ç¬¦ï¼‰
- **defaultSinceHours**ï¼šé»˜è®¤å¼€å§‹æ—¶é—´åç§»ï¼ˆå°æ—¶ï¼Œè´Ÿæ•°è¡¨ç¤ºå¾€å‰æ¨ï¼‰
- **defaultUntilHours**ï¼šé»˜è®¤ç»“æŸæ—¶é—´ï¼ˆå½“å¤©çš„å°æ—¶æ•°ï¼‰
- **authorMapping**ï¼šä½œè€…åç§°æ˜ å°„ï¼Œç”¨äºç»Ÿä¸€åŒä¸€äººçš„å¤šä¸ª Git è´¦å·
- **openspecDir**ï¼šOpenSpec ææ¡ˆç›®å½•ï¼ˆé»˜è®¤ï¼š`openspec/`ï¼‰
- **excludeExtensions**ï¼šæ’é™¤çš„æ–‡ä»¶æ‰©å±•åï¼ˆä¸è®¡å…¥ä»£ç å˜æ›´ï¼‰
- **activeUserWeeks**ï¼šæ´»è·ƒç”¨æˆ·æ—¶é—´çª—å£ï¼ˆå‘¨ï¼Œé»˜è®¤ï¼š2ï¼‰

## ç»Ÿè®¡é€»è¾‘

å·¥å…·ä¼šè¯†åˆ«åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶çš„æäº¤ï¼š

1. åŒ…å« `openspec/` ç›®å½•ä¸­çš„æ–‡ä»¶å˜æ›´ï¼ˆOpenSpec ææ¡ˆï¼‰
2. åŒ…å«ä»£ç æ–‡ä»¶å˜æ›´ï¼ˆæ’é™¤æ–‡æ¡£æ–‡ä»¶ï¼‰

ç»Ÿè®¡å†…å®¹åŒ…æ‹¬ï¼š

- **æäº¤æ•°**ï¼šç¬¦åˆæ¡ä»¶çš„æäº¤æ€»æ•°
- **OpenSpec ææ¡ˆ**ï¼šæŒ‰ `openspec/changes/{ææ¡ˆåç§°}` ç›®å½•ç»Ÿè®¡
- **ä»£ç æ–‡ä»¶**ï¼šä¿®æ”¹çš„ä»£ç æ–‡ä»¶æ•°é‡
- **æ–°å¢è¡Œæ•°**ï¼šæ–°å¢çš„ä»£ç è¡Œæ•°
- **åˆ é™¤è¡Œæ•°**ï¼šåˆ é™¤çš„ä»£ç è¡Œæ•°
- **å‡€å˜æ›´**ï¼šæ–°å¢è¡Œæ•° - åˆ é™¤è¡Œæ•°

å·¥å…·æä¾›ä¸¤ä¸ªç»Ÿè®¡è§†è§’ï¼š

1. **ææ¡ˆæ±‡æ€»**ï¼šæŒ‰ææ¡ˆèšåˆç»Ÿè®¡ï¼Œæ˜¾ç¤ºæ¯ä¸ªææ¡ˆçš„æ€»ä»£ç å˜æ›´é‡å’Œæ‰€æœ‰è´¡çŒ®è€…ï¼Œé¿å… merge commit å¯¼è‡´çš„ç»Ÿè®¡åå·®
2. **ä½œè€…æ±‡æ€»**ï¼šæŒ‰è´¡çŒ®è€…åˆ†ç»„ç»Ÿè®¡ï¼Œæ˜¾ç¤ºå„ä¸ªä½œè€…çš„ä¸ªäººè´¡çŒ®æƒ…å†µ

## è¾“å‡ºæ ¼å¼

### è¡¨æ ¼æ ¼å¼ï¼ˆé»˜è®¤ï¼‰

```
ğŸ“Š OpenSpec ç»Ÿè®¡æŠ¥å‘Š
æ—¶é—´èŒƒå›´ï¼š2024-01-01 00:00:00 ~ 2024-01-31 23:59:59
åˆ†æ”¯ï¼šorigin/master
æ€»æäº¤æ•°ï¼š15

ğŸ“‹ ææ¡ˆæ±‡æ€»ï¼ˆæŒ‰ææ¡ˆç»Ÿè®¡ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ææ¡ˆ         â”‚ æäº¤æ•°  â”‚ è´¡çŒ®è€…           â”‚ ä»£ç æ–‡ä»¶   â”‚ æ–°å¢è¡Œæ•°  â”‚ åˆ é™¤è¡Œæ•°  â”‚ å‡€å˜æ›´      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ feature-123  â”‚ 5       â”‚ å¼ ä¸‰, æå››       â”‚ 30         â”‚ +890      â”‚ -234      â”‚ +656        â”‚
â”‚ feature-456  â”‚ 3       â”‚ å¼ ä¸‰             â”‚ 15         â”‚ +344      â”‚ -100      â”‚ +244        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ğŸ“Š æ€»è®¡ï¼š2 ä¸ªææ¡ˆ | 8 æ¬¡æäº¤ | 45 ä¸ªæ–‡ä»¶ | +1234/-334 è¡Œï¼ˆå‡€å˜æ›´ï¼š+900ï¼‰

ğŸ‘¥ ä½œè€…æ±‡æ€»ï¼ˆæŒ‰è´¡çŒ®è€…ç»Ÿè®¡ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä½œè€…     â”‚ æäº¤æ•°  â”‚ ææ¡ˆæ•°           â”‚ ä»£ç æ–‡ä»¶   â”‚ æ–°å¢è¡Œæ•°  â”‚ åˆ é™¤è¡Œæ•°  â”‚ å‡€å˜æ›´      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¼ ä¸‰     â”‚ 8       â”‚ 3                â”‚ 45         â”‚ +1234     â”‚ -567      â”‚ +667        â”‚
â”‚ æå››     â”‚ 7       â”‚ 2                â”‚ 32         â”‚ +890      â”‚ -234      â”‚ +656        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### JSON æ ¼å¼

```bash
openspec-stat --json
```

### CSV æ ¼å¼

```bash
openspec-stat --csv > stats.csv
```

### Markdown æ ¼å¼

```bash
openspec-stat --markdown > report.md
```

## è¯­è¨€æ”¯æŒ

å·¥å…·æ”¯æŒè‹±æ–‡å’Œä¸­æ–‡è¾“å‡ºã€‚æ‚¨å¯ä»¥ä½¿ç”¨ `--lang` é€‰é¡¹æŒ‡å®šè¯­è¨€ï¼š

```bash
# è‹±æ–‡è¾“å‡ºï¼ˆé»˜è®¤ï¼‰
openspec-stat --lang en

# ä¸­æ–‡è¾“å‡º
openspec-stat --lang zh-CN
```

å·¥å…·è¿˜ä¼šè‡ªåŠ¨æ£€æµ‹æ‚¨çš„ç³»ç»Ÿè¯­è¨€ã€‚å¦‚æœæ‚¨çš„ç³»ç»ŸåŒºåŸŸè®¾ç½®ä¸ºä¸­æ–‡ï¼Œè¾“å‡ºå°†é»˜è®¤ä½¿ç”¨ä¸­æ–‡ã€‚

## å¼€å‘

```bash
# å®‰è£…ä¾èµ–
pnpm install

# å¼€å‘æ¨¡å¼
pnpm dev

# æ„å»º
pnpm build

# æœ¬åœ°æµ‹è¯•
node dist/esm/cli.js
```

## è´¡çŒ®ä¸å‘å¸ƒæµç¨‹

- è¯·é˜…è¯» [CONTRIBUTING.md](./CONTRIBUTING.md) äº†è§£å¼€å‘ç¯å¢ƒã€åˆ†æ”¯ç­–ç•¥å’Œ PR è§„èŒƒã€‚
- è¯·é˜…è¯» [RELEASE.md](./RELEASE.md) äº†è§£åŸºäº Changesets çš„ç‰ˆæœ¬ä¸å‘å¸ƒæµç¨‹ã€‚

## è®¸å¯è¯

MIT
